<!--//index.html page for assignment 2

Things to do: 

Retrieves location via navigator.geolocation (check)

Sends location to datastore properly encoded (check)

Displays your location on the map with unique marker (check)

Retrieves locations of people in the class
HAVERSINE STUFF (nope)

Displays location of people in class and info (nope)

JefflynGage

-->

<!DOCTYPE html>
<html>
<head>
<title>Assignment 2</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"> </script>

<script>
var http = new XMLHttpRequest();
var myLat = 0;
var myLng = 0;			
var me = new google.maps.LatLng(myLat, myLng);
var myOptions = {
	zoom: 13, // The larger the zoom number, the bigger the zoom
	center: me,
	mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map;
var marker;
var json;
var infowindow = new google.maps.InfoWindow();



function init() {

	map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	getMyLocation();

}

//update myLat and myLng to coordinates
function getMyLocation() { 
	if (navigator.geolocation) { 
		navigator.geolocation.getCurrentPosition(function(position) {
			myLat = position.coords.latitude;
			myLng = position.coords.longitude;
			console.log(myLat);
			console.log(myLng);
			renderMap();
		});
	}
	else {
		alert("Geolocation is not supported by your web browser.  What a shame!");
	}
}

//create map and place self on it
function renderMap()		
{
	// Update map and go there...
	map.panTo(me);
	
	// Create a marker
	marker = new google.maps.Marker({
		position: me,
		title: "Here I Be Landlubberer"
	});
				
	marker.setMap(map);
					
	// Open info window on click of marker
	google.maps.event.addListener(marker, 'click', function() {
		infowindow.setContent(marker.title);
		infowindow.open(map, marker);
	});
}

/*



function getdata()
{
	var http = new XMLHttpRequest();
	var url = encodeURIComponent("https://secret-about-box.herokuapp.com/sendLocation");
	var params = "login=JefflynGage&lat="+ myLat +"&lng="+myLng+"&message=Bacon%20is%20Satan";
	http.open("POST", url, true);

	//Send the proper header information along with the request
	http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	http.setRequestHeader("Content-length", params.length);
	http.setRequestHeader("Connection", "close");

	http.onreadystatechange = function() {//Call a function when the state changes.
    	if(http.readyState == 4 && http.status == 200) {
        	json = JSON.parse(xhr.responseText);
	    }
	}
	
	http.send(params);
}
*/

</script>
</head>

<body onload="init()">
<div id = "canvas"></div>
</body>
</html>


